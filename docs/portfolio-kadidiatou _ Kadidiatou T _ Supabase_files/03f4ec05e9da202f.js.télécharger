;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0c7449fa-a32e-1908-86d6-9d4a641e3094")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,744061,418638,e=>{"use strict";var t=e.i(478902),s=e.i(938933),a=e.i(843778);function r({children:e,className:s,tag:a="div",style:r}){let n=`${a}`;return(0,t.jsx)(n,{style:r,children:e})}r.Title=function({className:e,level:s=1,children:a,style:r}){let n=`h${s}`;return(0,t.jsx)(n,{style:r,children:a})},r.Text=function({className:e,children:s,style:a,type:r,disabled:n,mark:i,code:o,keyboard:l,underline:c,strikethrough:d,strong:u,small:m}){return o?(0,t.jsx)("code",{style:a,children:s}):i?(0,t.jsx)("mark",{style:a,children:s}):l?(0,t.jsx)("kbd",{style:a,children:s}):u?(0,t.jsx)("strong",{style:a,children:s}):(0,t.jsx)("span",{style:a,children:s})},r.Link=function({children:e,target:s="_blank",href:a,className:r,onClick:n,style:i}){return(0,t.jsx)("a",{onClick:n,href:a,target:s,rel:"noopener noreferrer",style:i,children:e})},e.s(["default",0,r],418638);var n=e.i(389959);let i=(0,n.createContext)({type:"text"}),o=e=>{let{type:s}=e;return(0,t.jsx)(i.Provider,{value:{type:s},children:e.children})},l=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:s,ulClassName:a,style:r,type:n="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:r,children:(0,t.jsx)(o,{type:n,children:(0,t.jsx)("ul",{className:a,children:e})})})}c.Item=function({children:e,icon:r,active:n,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,s.default)("menu"),{type:h}=l(),p=[m.item.base];p.push(m.item.variants[h].base),n?p.push(m.item.variants[h].active):p.push(m.item.variants[h].normal);let f=[m.item.content.base];n?f.push(m.item.content.active):f.push(m.item.content.normal);let x=[m.item.icon.base];return n?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,a.cn)("outline-none",p),style:u,onClick:o,"aria-current":n?"page":void 0,children:[r&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:r}),(0,t.jsx)("span",{className:f.join(" "),children:e})]})},c.Group=function({children:e,icon:a,title:r}){let n=(0,s.default)("menu"),{type:i}=l();return(0,t.jsxs)("div",{className:[n.group.base,n.group.variants[i]].join(" "),children:[a&&(0,t.jsx)("span",{className:n.group.icon,children:a}),(0,t.jsx)("span",{className:n.group.content,children:r}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(r.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},902780,e=>{"use strict";var t=e.i(478902),s=e.i(645388),a=e.i(837710),r=e.i(843778),n=e.i(710483);e.s(["UnknownInterface",0,({urlBack:e,fullHeight:i=!0})=>(0,t.jsx)("div",{className:(0,r.cn)("w-full flex items-center justify-center",i&&"h-full"),children:(0,t.jsx)(n.Admonition,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for",children:(0,t.jsx)(a.Button,{asChild:!0,type:"default",className:"mt-2",children:(0,t.jsx)(s.default,{href:e,children:"Head back"})})})})])},248210,e=>{"use strict";var t=e.i(478902),s=e.i(843778);e.s(["LoadingLine",0,({loading:e})=>(0,t.jsx)("div",{className:"relative overflow-hidden w-full h-px bg-border m-auto",children:(0,t.jsx)("span",{className:(0,s.cn)("absolute w-[80px] h-px ml-auto mr-auto left-0 right-0 text-center block top-0","transition-all","line-loading-bg-light dark:line-loading-bg",e&&"animate-line-loading-slower opacity-100",e?"opacity-100":"opacity-0")})})])},974900,e=>{"use strict";var t=e.i(755216),s=e.i(242882),a=e.i(714403);let r=e=>["projects",e,"database-roles"],n=t.default.roles.list();async function i({projectRef:e,connectionString:t},s){let{result:r}=await (0,a.executeSql)({projectRef:e,connectionString:t,sql:n.sql,queryKey:["database-roles"]},s);return r}function o(e,t){return e.invalidateQueries({queryKey:r(t)})}e.s(["invalidateRolesQuery",()=>o,"useDatabaseRolesQuery",0,({projectRef:e,connectionString:t},{enabled:a=!0,...n}={})=>(0,s.useQuery)({queryKey:r(e),queryFn:({signal:s})=>i({projectRef:e,connectionString:t},s),enabled:a&&void 0!==e,...n})],974900)},350046,e=>{"use strict";var t=e.i(478902),s=e.i(224521),a=e.i(88816),r=e.i(389959),n=e.i(843778);let i=s.Root,o=r.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Item,{ref:r,className:(0,n.cn)("border-b",e),...a}));o.displayName="AccordionItem";let l=r.forwardRef(({className:e,children:r,hideIcon:i,...o},l)=>(0,t.jsx)(s.Header,{className:"flex",children:(0,t.jsxs)(s.Trigger,{ref:l,className:(0,n.cn)("flex flex-1 gap-2 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 text-left",e),...o,children:[r,!i&&(0,t.jsx)(a.ChevronDown,{className:"h-4 w-4 transition-transform duration-200 shrink-0"})]})}));l.displayName=s.Trigger.displayName;let c=r.forwardRef(({className:e,children:a,...r},i)=>(0,t.jsx)(s.Content,{ref:i,className:(0,n.cn)("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",e),...r,children:(0,t.jsx)("div",{className:"pb-4 pt-0",children:a})}));c.displayName=s.Content.displayName,e.s(["Accordion",()=>i,"AccordionContent",()=>c,"AccordionItem",()=>o,"AccordionTrigger",()=>l])},31227,154225,e=>{"use strict";var t=e.i(350046);e.s(["AccordionContent_Shadcn_",()=>t.AccordionContent],31227),e.s(["AccordionItem_Shadcn_",()=>t.AccordionItem],154225)},350341,e=>{"use strict";var t=e.i(350046);e.s(["Accordion_Shadcn_",()=>t.Accordion])},503256,e=>{"use strict";var t=e.i(389959);let s=t.forwardRef(function({title:e,titleId:s,...a},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),e?t.createElement("title",{id:s},e):null,t.createElement("path",{fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z",clipRule:"evenodd"}))});e.s(["InformationCircleIcon",0,s],503256)},494031,e=>{"use strict";var t=e.i(749199),s=e.i(820308),a=e.i(775159);e.s(["useQueryPerformanceQuery",0,({preset:e,orderBy:r,searchQuery:n="",roles:i,runIndexAdvisor:o=!1,minCalls:l,minTotalTime:c,filterIndexAdvisor:d=!1})=>{let u=s.PRESET_CONFIG[a.Presets.QUERY_PERFORMANCE].queries[e],m=[void 0!==i&&i.length>0?`auth.rolname in (${i.map(e=>`'${e}'`).join(", ")})`:"",n.length>0?`statements.query ~* '${n}'`:"","number"==typeof l&&l>0?`statements.calls >= ${l}`:"","number"==typeof c&&c>0?`(statements.total_exec_time + statements.total_plan_time) >= ${c}`:""].filter(e=>e.length>0).join(" AND "),h=r&&`ORDER BY ${r.column} ${r.order}`,p=u.sql([],m.length>0?`WHERE ${m}`:void 0,h,o,d);return(0,t.default)({sql:p,params:void 0,where:m,orderBy:h})}])},593977,770235,e=>{"use strict";var t=e.i(478902),s=e.i(843778),a=e.i(760255);e.s(["IndexImprovementText",0,({indexStatements:e,totalCostBefore:r,totalCostAfter:n,className:i,...o})=>{let l=(0,a.calculateImprovement)(r,n);return(0,t.jsxs)("p",{className:(0,s.cn)("text-sm text-foreground-light mb-3",i),...o,children:["Query's performance can be improved by"," ",(0,t.jsxs)("span",{className:"text-brand",children:[l.toFixed(2),"%"]})," by creating this"," ",e.length>1?"indexes":"index",":"]})}],593977);var r=e.i(503256),n=e.i(177948),i=e.i(749844),o=e.i(613580);e.s(["QueryPanelContainer",0,({children:e,className:a})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col gap-y-0 py-4",a),children:e}),"QueryPanelScoreSection",0,({className:e,name:a,description:l,before:c,after:d,hideArrowMarkers:u=!1})=>(0,t.jsxs)("div",{className:(0,s.cn)("py-4 px-4 flex",e),children:[(0,t.jsxs)("div",{className:"flex gap-x-2 w-48",children:[(0,t.jsx)("span",{className:"text-sm",children:a}),(0,t.jsxs)(o.Tooltip,{children:[(0,t.jsx)(o.TooltipTrigger,{asChild:!0,className:"mt-1",children:(0,t.jsx)(r.InformationCircleIcon,{className:"transition text-foreground-muted w-3 h-3 data-[state=delayed-open]:text-foreground-light"})}),(0,t.jsx)(o.TooltipContent,{side:"top",className:"w-52 text-center",children:l})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("div",{className:"flex gap-x-2 text-sm",children:[(0,t.jsx)("span",{className:"text-foreground-light w-20",children:"Currently:"}),(0,t.jsx)("span",{className:(0,s.cn)("font-mono",void 0!==c&&void 0!==d&&c!==d?"text-foreground-light":""),children:c})]}),void 0!==c&&void 0!==d&&c!==d&&(0,t.jsxs)("div",{className:"flex items-center gap-x-2 text-sm",children:[(0,t.jsx)("span",{className:"text-foreground-light w-20",children:"With index:"}),(0,t.jsx)("span",{className:"font-mono",children:d}),void 0!==c&&!u&&(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[d>c?(0,t.jsx)(i.ArrowUp,{size:14,className:"text-warning"}):(0,t.jsx)(n.ArrowDown,{size:14,className:"text-brand"}),"number"==typeof c&&0!==c&&!isNaN(c)&&isFinite(c)&&(0,t.jsxs)("span",{className:(0,s.cn)("font-mono tracking-tighter",d>c?"text-warning":"text-brand"),children:[((c-d)/c*100).toFixed(2),"%"]})]})]})]})]}),"QueryPanelSection",0,({children:e,className:a})=>(0,t.jsx)("div",{className:(0,s.cn)("px-6 flex flex-col gap-y-0",a),children:e})],770235)},764275,e=>{"use strict";var t,s=((t={}).MOST_TIME_CONSUMING="most_time_consuming",t.MOST_FREQUENT="most_frequent",t.SLOWEST_EXECUTION="slowest_execution",t.UNIFIED="unified",t);let a=(e,t)=>`
select 
  id,
  pgl.timestamp as timestamp,
  'postgres' as log_type,
  CAST(pgl_parsed.sql_state_code AS STRING) as status,
  CASE
      WHEN pgl_parsed.error_severity = 'LOG' THEN 'success'
      WHEN pgl_parsed.error_severity = 'WARNING' THEN 'warning'
      WHEN pgl_parsed.error_severity = 'FATAL' THEN 'error'
      WHEN pgl_parsed.error_severity = 'ERROR' THEN 'error'
      ELSE null
  END as level,
  event_message as event_message
from postgres_logs as pgl
cross join unnest(pgl.metadata) as pgl_metadata
cross join unnest(pgl_metadata.parsed) as pgl_parsed
WHERE pgl.event_message LIKE '%[pg_stat_monitor]%'
  AND pgl.timestamp >= CAST('${e}' AS TIMESTAMP)
  AND pgl.timestamp <= CAST('${t}' AS TIMESTAMP)
ORDER BY timestamp DESC
`.trim();a(new Date(Date.now()-864e5).toISOString(),new Date().toISOString()),e.s(["QUERY_PERFORMANCE_CHART_TABS",0,[{id:"query_latency",label:"Query latency"},{id:"rows_read",label:"Rows read"},{id:"calls",label:"Calls"},{id:"cache_hits",label:"Cache hits"}],"QUERY_PERFORMANCE_COLUMNS",0,[{id:"query",name:"Query",description:void 0,minWidth:500},{id:"prop_total_time",name:"Time consumed",description:void 0,minWidth:150},{id:"calls",name:"Calls",description:void 0,minWidth:100},{id:"max_time",name:"Max time",description:void 0,minWidth:100},{id:"mean_time",name:"Mean time",description:void 0,minWidth:100},{id:"min_time",name:"Min time",description:void 0,minWidth:100},{id:"rows_read",name:"Rows processed",description:void 0,minWidth:130},{id:"cache_hit_rate",name:"Cache hit rate",description:void 0,minWidth:130},{id:"rolname",name:"Role",description:void 0,minWidth:200}],"QUERY_PERFORMANCE_PRESET_MAP",0,{most_time_consuming:"mostTimeConsuming",most_frequent:"mostFrequentlyInvoked",slowest_execution:"slowestExecutionTime",unified:"unified"},"QUERY_PERFORMANCE_REPORT_TYPES",()=>s,"QUERY_PERFORMANCE_ROLE_DESCRIPTION",0,[{name:"postgres",description:"The default Postgres role. This has admin privileges."},{name:"anon",description:"For unauthenticated, public access. This is the role which the API (PostgREST) will use when a user is not logged in."},{name:"authenticator",description:'A special role for the API (PostgREST). It has very limited access, and is used to validate a JWT and then "change into" another role determined by the JWT verification.'},{name:"authenticated",description:'For "authenticated access." This is the role which the API (PostgREST) will use when a user is logged in.'},{name:"service_role",description:"For elevated access. This role is used by the API (PostgREST) to bypass Row Level Security."},{name:"supabase_auth_admin",description:"Used by the Auth middleware to connect to the database and run migration. Access is scoped to the auth schema."},{name:"supabase_storage_admin",description:"Used by the Auth middleware to connect to the database and run migration. Access is scoped to the storage schema."},{name:"dashboard_user",description:"For running commands via the Supabase UI."},{name:"supabase_admin",description:"An internal role Supabase uses for administrative tasks, such as running upgrades and automations."},{name:"pgbouncer",description:"PgBouncer is a lightweight connection pooler for PostgreSQL. Available on paid plans only."}],"getPgStatMonitorLogsQuery",0,a])},849368,48202,e=>{"use strict";var t=e.i(242882),s=e.i(97429),a=e.i(714403),r=e.i(246230),n=e.i(760255);let i=s.z.object({errors:s.z.array(s.z.string()),index_statements:s.z.array(s.z.string()),startup_cost_before:s.z.number(),startup_cost_after:s.z.number(),total_cost_before:s.z.number(),total_cost_after:s.z.number()});async function o({projectRef:e,connectionString:t,query:s}){if(!e)throw Error("Project ref is required");let r=s.replace(/'/g,"''"),{result:o}=await (0,a.executeSql)({projectRef:e,connectionString:t,sql:`set search_path to public, extensions; select * from index_advisor('${r}');`});if(!o||0===o.length)return console.error("[index_advisor > getIndexAdvisorResult] No results from index_advisor"),null;let l=i.safeParse(o[0]);if(!l.success){let e=l.error.errors[0],t=e.path.length>0?` at path: ${e.path.join(".")}`:"";return console.error(`Invalid index advisor response${t}: ${e.message}. Received: ${JSON.stringify(o[0])}`),null}return(0,n.filterProtectedSchemaIndexAdvisorResult)(l.data)}async function l({projectRef:e,connectionString:t,query:s}){if(!e)throw Error("Project ref is required");try{var r;let n,{result:i}=await (0,a.executeSql)({projectRef:e,connectionString:t,queryKey:["involved-indexes-explain-query"],sql:`
        create or replace function pg_temp.explain_query(query text) returns jsonb
        language plpgsql
        as $$
        declare
            explain_result jsonb;
            prepared_statement_name text := 'query_to_explain';
            explain_plan_statement text;
            n_args int;
        begin
            -- Remove comment lines (its common that they contain semicolons)
            query := trim(
                regexp_replace(
                    regexp_replace(
                        regexp_replace(query,'\\/\\*.+\\*\\/', '', 'g'),
                    '--[^\\r\\n]*', ' ', 'g'),
                '\\s+', ' ', 'g')
            );
      
            -- Remove trailing semicolon
            query := regexp_replace(query, ';\\s*$', '');

            -- Disallow multiple statements
            if query ilike '%;%' then
                raise exception 'Query must not contain a semicolon';
            end if;
        
            -- Hack to support PostgREST because the prepared statement for args incorrectly defaults to text
            query := replace(query, 'WITH pgrst_payload AS (SELECT $1 AS json_data)', 
                                    'WITH pgrst_payload AS (SELECT $1::json AS json_data)');
        
            -- Create a prepared statement for the given query
            deallocate all;
            execute format('prepare %I as %s', prepared_statement_name, query);
        
            -- Detect how many arguments are present in the prepared statement
            n_args = (
                select
                    coalesce(array_length(parameter_types, 1), 0)
                from
                    pg_prepared_statements
                where
                    name = prepared_statement_name
                limit
                    1
            );
        
            -- Create a SQL statement that can be executed to collect the explain plan
            explain_plan_statement = format(
                'set local plan_cache_mode = force_generic_plan; explain (format json) execute %I%s',
                prepared_statement_name,
                case
                    when n_args = 0 then ''
                    else format(
                        '(%s)', array_to_string(array_fill('null'::text, array[n_args]), ',')
                    )
                end
            );
        
            -- Execute the explain plan statement and get the result
            execute explain_plan_statement into explain_result;
        
            -- Clean up the prepared statement
            deallocate all;
        
            -- Return the explain result
            return explain_result;
        end;
        $$;

        select pg_temp.explain_query('${s}') as plans;
      `}),o=(r=i,n=[],!function e(t){null!==t&&"object"==typeof t&&("Index Name"in t&&n.push(t["Index Name"]),Object.values(t).forEach(t=>e(t)))}(r),n);if(o.length<=0)return[];let{result:l}=await (0,a.executeSql)({projectRef:e,connectionString:t,queryKey:["involved-indexes-names"],sql:`select schemaname as schema, tablename as table, indexname as name from pg_indexes where indexname in (${o.map(e=>`'${e}'`).join(", ")});`});return l}catch(e){return[]}}e.s(["useGetIndexAdvisorResult",0,({projectRef:e,connectionString:s,query:a},{enabled:n=!0,...i}={})=>(0,t.useQuery)({queryKey:r.databaseKeys.indexAdvisorFromQuery(e,a),queryFn:()=>o({projectRef:e,connectionString:s,query:a}),retry:!1,enabled:n&&void 0!==e&&void 0!==a&&(a.startsWith("select")||a.startsWith("SELECT"))||"string"==typeof a&&a.trim().toLowerCase().startsWith("with pgrst_source"),...i})],849368),e.s(["useGetIndexesFromSelectQuery",0,({projectRef:e,connectionString:s,query:a},{enabled:n=!0,...i}={})=>{let o=(a??"").trim().toLowerCase(),c=o.startsWith("select")||o.startsWith("with pgrst_source")||o.startsWith("with pgrst_payload");return(0,t.useQuery)({queryKey:r.databaseKeys.indexesFromQuery(e,a),queryFn:()=>l({projectRef:e,connectionString:s,query:a}),retry:!1,enabled:n&&void 0!==e&&void 0!==a&&c,...i})}],48202)},961563,e=>{"use strict";var t=e.i(478902),s=e.i(645388),a=e.i(355901);e.i(128328);var r=e.i(158639),n=e.i(513826),i=e.i(610144),o=e.i(450972),l=e.i(635494),c=e.i(10429),d=e.i(206413),u=e.i(592360),m=e.i(178527),h=e.i(837710),p=e.i(592383),f=e.i(760255);e.s(["IndexAdvisorDisabledState",0,()=>{let{ref:e}=(0,r.useParams)(),{data:x}=(0,l.useSelectedProjectQuery)(),{data:g}=(0,o.useDatabaseExtensionsQuery)({projectRef:x?.ref,connectionString:x?.connectionString}),{hypopg:y,indexAdvisor:v}=(0,f.getIndexAdvisorExtensions)(g),{mutateAsync:b,isPending:j}=(0,i.useDatabaseExtensionEnableMutation)(),_=async()=>{if(void 0===x)return console.error("Project is required");try{y?.installed_version===null&&await b({projectRef:x?.ref,connectionString:x?.connectionString,name:y.name,schema:y?.schema??"extensions",version:y.default_version}),v?.installed_version===null&&await b({projectRef:x?.ref,connectionString:x?.connectionString,name:v.name,schema:v?.schema??"extensions",version:v.default_version}),a.toast.success("Successfully enabled index advisor!")}catch(e){a.toast.error(`Failed to enable index advisor: ${e.message}`)}};return(0,t.jsxs)(m.Alert_Shadcn_,{className:"mb-6",children:[(0,t.jsx)(u.AlertTitle_Shadcn_,{children:(0,t.jsx)(p.Markdown,{className:"text-foreground",content:void 0===v?"Newer version of Postgres required":"Postgres extensions `index_advisor` and `hypopg` required"})}),(0,t.jsx)(d.AlertDescription_Shadcn_,{children:(0,t.jsx)(p.Markdown,{content:void 0===v?"Upgrade to the latest version of Postgres to get recommendations on indexes for your queries":"These extensions can help in recommending database indexes to reduce the costs of your query."})}),(0,t.jsx)(d.AlertDescription_Shadcn_,{className:"mt-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0===v?(0,t.jsx)(h.Button,{asChild:!0,type:"default",children:(0,t.jsx)(s.default,{href:`/project/${e}/settings/infrastructure`,children:"Upgrade Postgres version"})}):(0,t.jsx)(h.Button,{type:"default",disabled:j,loading:j,onClick:()=>_(),children:"Enable extensions"}),(0,t.jsx)(n.DocsButton,{href:`${c.DOCS_URL}/guides/database/extensions/index_advisor`})]})})]})}])},826843,331906,e=>{"use strict";e.s(["TableIndexAdvisorProvider",()=>z,"useColumnHasIndexSuggestion",()=>W,"useTableIndexAdvisor",()=>K],826843);var t=e.i(478902),s=e.i(356003),a=e.i(389959);e.s(["QueryIndexes",()=>M],331906);var r=e.i(370410),n=e.i(219195),i=e.i(350046),o=e.i(888525),l=e.i(567558),c=e.i(513826),d=e.i(710483),u=e.i(450972),m=e.i(849368),h=e.i(48202),p=e.i(635494),f=e.i(10429),x=e.i(967052),g=e.i(31227),y=e.i(154225),v=e.i(350341),b=e.i(206413),j=e.i(592360),_=e.i(178527),S=e.i(837710),w=e.i(672044),N=e.i(774234),k=e.i(554855),C=e.i(925282),A=e.i(843778),E=e.i(108151),P=e.i(908942),R=e.i(284399),T=e.i(760255),I=e.i(961563),$=e.i(593977),q=e.i(770235);let M=({selectedRow:e,columnName:s,suggestedSelectQuery:M,onClose:L})=>{let{data:O}=(0,p.useSelectedProjectQuery)(),[F,D]=(0,a.useState)(!1),[Q,H]=(0,a.useState)(!1),z=(0,x.useTrack)(),[K,W]=(0,a.useState)(!1),{data:B,isSuccess:U,isPending:Y,isError:G,error:V}=(0,h.useGetIndexesFromSelectQuery)({projectRef:O?.ref,connectionString:O?.connectionString,query:e?.query}),{data:Z,isPending:X}=(0,u.useDatabaseExtensionsQuery)({projectRef:O?.ref,connectionString:O?.connectionString}),{isIndexAdvisorEnabled:J}=(0,o.useIndexAdvisorStatus)(),{data:ee,error:et,refetch:es,isError:ea,isSuccess:er,isLoading:en}=(0,m.useGetIndexAdvisorResult)({projectRef:O?.ref,connectionString:O?.connectionString,query:e?.query},{enabled:J}),{index_statements:ei,startup_cost_after:eo,startup_cost_before:el,total_cost_after:ec,total_cost_before:ed}=ee??{index_statements:[],total_cost_after:0,total_cost_before:0},eu=(0,T.hasIndexRecommendations)(ee,er);(0,T.calculateImprovement)(ed,ec);let em=(0,P.useIndexInvalidation)();(0,a.useEffect)(()=>{en||K||(z("index_advisor_tab_clicked",{hasRecommendations:eu,isIndexAdvisorEnabled:J}),W(!0))},[en,eu,K,z,J]);let eh=async()=>{if(0!==ei.length){H(!0),z("index_advisor_create_indexes_button_clicked");try{await (0,T.createIndexes)({projectRef:O?.ref,connectionString:O?.connectionString,indexStatements:ei,onSuccess:()=>es()}),em()}catch(e){console.error("Failed to create index:",e),H(!1)}finally{H(!1),L?.()}}};return X||J?(0,t.jsxs)(q.QueryPanelContainer,{className:"h-full overflow-y-auto py-0 pt-4",children:[(s||M)&&(0,t.jsx)(q.QueryPanelSection,{className:"pt-2 pb-6 border-b",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"mb-2",children:"Recommendation reason"}),s&&(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Recommendation for column: ",(0,t.jsx)("span",{className:"font-mono",children:s})]})]}),M&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Based on the following query:"}),(0,t.jsx)(w.CodeBlock,{hideLineNumbers:!0,value:M,language:"sql",className:(0,A.cn)("max-w-full max-h-[200px]","!py-2 !px-2.5 prose dark:prose-dark","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap")})]})]})}),(0,t.jsxs)(q.QueryPanelSection,{className:"pt-2 mb-6",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-y-1",children:[(0,t.jsx)("h4",{className:"mb-2",children:"Indexes in use"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["This query is using the following index",(B??[]).length>1?"s":"",":"]})]}),Y&&(0,t.jsx)(E.GenericSkeletonLoader,{}),G&&(0,t.jsx)(l.default,{projectRef:O?.ref,error:V,subject:"Failed to retrieve indexes in use"}),U&&(0,t.jsxs)("div",{children:[0===B.length&&(0,t.jsxs)("div",{className:"border rounded border-dashed flex flex-col items-center justify-center py-4 px-12 gap-y-1 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No indexes are involved in this query"}),(0,t.jsx)("p",{className:"text-center text-xs text-foreground-lighter",children:"Indexes may not necessarily be used if they incur a higher cost when executing the query"})]}),B.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-x-4 bg-surface-100 border first:rounded-tl first:rounded-tr border-b-0 last:border-b last:rounded-b px-2 py-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(n.Table2,{size:14,className:"text-foreground-light"}),(0,t.jsxs)("span",{className:"text-xs font-mono text-foreground-light",children:[e.schema,".",e.table]})]}),(0,t.jsx)("span",{className:"text-xs font-mono",children:e.name})]},e.name))]})]}),(0,t.jsx)(q.QueryPanelSection,{className:"flex flex-col gap-y-6 py-6 border-t",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(!er||null!==ee)&&(0,t.jsx)("h4",{className:"mb-2",children:"New index recommendations"}),X?(0,t.jsx)(E.GenericSkeletonLoader,{}):J?(0,t.jsxs)(t.Fragment,{children:[en&&(0,t.jsx)(E.GenericSkeletonLoader,{}),ea&&(0,t.jsx)(l.default,{projectRef:O?.ref,error:et,subject:"Failed to retrieve result from index advisor"}),er&&(0,t.jsx)(t.Fragment,{children:null===ee?(0,t.jsx)(d.Admonition,{type:"default",showIcon:!0,title:"Index recommendations not available",description:"Index advisor could not analyze this query. This can happen if the query references tables, functions, or extensions that no longer exist or were deleted."}):0===(ei??[]).length?(0,t.jsxs)(_.Alert_Shadcn_,{className:"[&>svg]:rounded-full",children:[(0,t.jsx)(r.Check,{}),(0,t.jsx)(j.AlertTitle_Shadcn_,{children:"This query is optimized"}),(0,t.jsx)(b.AlertDescription_Shadcn_,{children:"Recommendations for indexes will show here"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.IndexImprovementText,{indexStatements:ei,totalCostBefore:ed,totalCostAfter:ec,className:"text-sm text-foreground-light"}),(0,t.jsx)(w.CodeBlock,{hideLineNumbers:!0,value:ei.join(";\n")+";",language:"sql",className:(0,A.cn)("max-w-full max-h-[310px]","!py-3 !px-3.5 prose dark:prose-dark transition","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap")}),(0,t.jsx)("p",{className:"text-sm text-foreground-light mt-3",children:"This recommendation serves to prevent your queries from slowing down as your application grows, and hence the index may not be used immediately after it's created (e.g If your table is still small at this time)."})]})})]}):(0,t.jsx)(I.IndexAdvisorDisabledState,{})]})}),J&&eu&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.QueryPanelSection,{className:"py-6 border-t",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)("h4",{className:"mb-2",children:"Query costs"}),(0,t.jsxs)("div",{className:"border rounded-md flex flex-col bg-surface-100",children:[(0,t.jsx)(q.QueryPanelScoreSection,{name:"Total cost of query",description:"An estimate of how long it will take to return all the rows (Includes start up cost)",before:ed,after:ec}),(0,t.jsxs)(C.Collapsible_Shadcn_,{open:F,onOpenChange:D,children:[(0,t.jsx)(N.CollapsibleContent_Shadcn_,{asChild:!0,className:"pb-3",children:(0,t.jsx)(q.QueryPanelScoreSection,{hideArrowMarkers:!0,className:"border-t",name:"Start up cost",description:"An estimate of how long it will take to fetch the first row",before:el,after:eo})}),(0,t.jsxs)(k.CollapsibleTrigger_Shadcn_,{className:"text-xs py-1.5 border-t text-foreground-light bg-studio w-full rounded-b-md",children:["View ",F?"less":"more"]})]})]})]})}),(0,t.jsx)(q.QueryPanelSection,{className:"py-6 border-t",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,t.jsx)("h4",{className:"mb-2",children:"FAQ"}),(0,t.jsxs)(v.Accordion_Shadcn_,{collapsible:!0,type:"single",className:"border rounded-md",children:[(0,t.jsxs)(y.AccordionItem_Shadcn_,{value:"1",children:[(0,t.jsx)(i.AccordionTrigger,{className:"px-4 py-3 text-sm font-normal text-foreground-light hover:text-foreground transition [&[data-state=open]]:text-foreground",children:"What units are cost in?"}),(0,t.jsx)(g.AccordionContent_Shadcn_,{className:"px-4 text-foreground-light",children:"Costs are in an arbitrary unit, and do not represent a unit of time. The units are anchored (by default) to a single sequential page read costing 1.0 units. They do, however, serve as a predictor of higher execution times."})]}),(0,t.jsxs)(y.AccordionItem_Shadcn_,{value:"2",className:"border-b-0",children:[(0,t.jsx)(i.AccordionTrigger,{className:"px-4 py-3 text-sm font-normal text-foreground-light hover:text-foreground transition [&[data-state=open]]:text-foreground",children:"How should I prioritize start up and total cost?"}),(0,t.jsxs)(g.AccordionContent_Shadcn_,{className:"px-4 text-foreground-light [&>div]:space-y-2",children:[(0,t.jsx)("p",{children:"This depends on the expected size of the result set from the query."}),(0,t.jsx)("p",{children:"For queries that return a small number or rows, the startup cost is more critical and minimizing startup cost can lead to faster response times, especially in interactive applications."}),(0,t.jsx)("p",{children:"For queries that return a large number of rows, the total cost becomes more important, and optimizing it will help in efficiently using resources and reducing overall query execution time."})]})]})]})]})})]}),J&&eu&&(0,t.jsxs)("div",{className:"bg-studio sticky bottom-0 border-t py-3 flex items-center justify-between px-5",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-0.5 text-xs",children:[(0,t.jsx)("span",{children:"Apply index to database"}),(0,t.jsx)("span",{className:"text-xs text-foreground-light",children:"This will run the SQL that is shown above"})]}),(0,t.jsx)(S.Button,{disabled:Q,loading:Q,type:"primary",onClick:()=>eh(),children:"Create index"})]})]}):(0,t.jsx)(q.QueryPanelContainer,{className:"h-full",children:(0,t.jsx)(q.QueryPanelSection,{className:"pt-2",children:(0,t.jsxs)("div",{className:"border rounded border-dashed flex flex-col items-center justify-center py-4 px-12 gap-y-1 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Enable Index Advisor"}),(0,t.jsx)("p",{className:"text-center text-xs text-foreground-lighter mb-2",children:"Recommends indexes to improve query performance."}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(c.DocsButton,{href:`${f.DOCS_URL}/guides/database/extensions/index_advisor`}),(0,t.jsx)(R.EnableIndexAdvisorButton,{})]})]})})})};var L=e.i(246230),O=e.i(242882),F=e.i(714403);async function D({projectRef:e,connectionString:t,schema:s,table:a}){let r,n;if(!e)throw Error("Project ref is required");if(!s)throw Error("Schema is required");if(!a)throw Error("Table is required");let i=(r=s.replace(/'/g,"''"),n=a.replace(/'/g,"''"),`
-- Get top 5 SELECT queries involving this table and run through index_advisor
set search_path to public, extensions;

with top_queries as (
  select
    statements.query,
    statements.calls,
    statements.total_exec_time + statements.total_plan_time as total_time,
    statements.mean_exec_time + statements.mean_plan_time as mean_time
  from pg_stat_statements as statements
    inner join pg_authid as auth on statements.userid = auth.oid
  where 
    -- Filter for SELECT queries only (index_advisor only works with SELECT)
    (lower(statements.query) like 'select%' or lower(statements.query) like 'with pgrst%')
    -- Filter for queries involving our table (handles schema.table and just table references)
    and (
      lower(statements.query) like '%${r.toLowerCase()}.${n.toLowerCase()}%'
      or lower(statements.query) like '%from ${n.toLowerCase()}%'
      or lower(statements.query) like '%join ${n.toLowerCase()}%'
    )
    -- Exclude system queries
    and statements.query not like '%pg_catalog%'
    and statements.query not like '%information_schema%'
  order by statements.calls desc
  limit 5
)
select
  tq.query,
  tq.calls,
  tq.total_time,
  tq.mean_time,
  coalesce(ia.index_statements, '{}') as index_statements,
  coalesce((ia.startup_cost_before)::numeric, 0) as startup_cost_before,
  coalesce((ia.startup_cost_after)::numeric, 0) as startup_cost_after,
  coalesce((ia.total_cost_before)::numeric, 0) as total_cost_before,
  coalesce((ia.total_cost_after)::numeric, 0) as total_cost_after
from top_queries tq
left join lateral (
  select * from index_advisor(tq.query)
) ia on true;
`.trim()),{result:o}=await (0,F.executeSql)({projectRef:e,connectionString:t,sql:i}),l=(o||[]).filter(e=>e.index_statements&&e.index_statements.length>0).map(e=>{let t=(0,T.filterProtectedSchemaIndexStatements)(e.index_statements);if(0===t.length)return null;let s=e.total_cost_before>0?(e.total_cost_before-e.total_cost_after)/e.total_cost_before*100:0;return{query:e.query,calls:e.calls,total_time:e.total_time,mean_time:e.mean_time,index_statements:t,startup_cost_before:e.startup_cost_before,startup_cost_after:e.startup_cost_after,total_cost_before:e.total_cost_before,total_cost_after:e.total_cost_after,improvement_percentage:Math.round(100*s)/100}}).filter(e=>null!==e),c=function(e){let t=new Set;for(let s of e){let e=s.match(/USING\s+\w+\s*\(([^)]+)\)/i);e&&e[1].split(",").forEach(e=>{let s=e.trim().replace(/^"(.+)"$/,"$1");s&&t.add(s)})}return Array.from(t)}(l.flatMap(e=>e.index_statements));return{suggestions:l,columnsWithSuggestions:c}}var Q=e.i(725137);let H=(0,a.createContext)({isLoading:!1,isAvailable:!1,isEnabled:!1,columnsWithSuggestions:[],suggestions:[],openSheet:()=>{},getSuggestionsForColumn:()=>[],invalidate:async()=>{}});function z({children:e,schema:r,table:n}){let{data:i}=(0,p.useSelectedProjectQuery)(),{isIndexAdvisorAvailable:l,isIndexAdvisorEnabled:c}=(0,o.useIndexAdvisorStatus)(),d=(0,s.useQueryClient)(),[u,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(void 0),{data:x,isLoading:g}=function({projectRef:e,connectionString:t,schema:s,table:a},{enabled:r=!0,...n}={}){return(0,O.useQuery)({queryKey:L.databaseKeys.tableIndexAdvisor(e,s,a),queryFn:()=>D({projectRef:e,connectionString:t,schema:s,table:a}),enabled:r&&void 0!==e&&!!s&&!!a,retry:!1,staleTime:3e5,...n})}({projectRef:i?.ref,connectionString:i?.connectionString,schema:r,table:n},{enabled:c&&!!r&&!!n}),y=(0,a.useCallback)(e=>{f(e),m(!0)},[]),v=(0,a.useCallback)(()=>{m(!1),f(void 0)},[]),b=(0,a.useCallback)(e=>x?.suggestions?x.suggestions.filter(t=>t.index_statements.some(t=>{let s=t.match(/USING\s+\w+\s*\(([^)]+)\)/i);return!!s&&s[1].split(",").map(e=>e.trim().replace(/^"(.+)"$/,"$1")).includes(e)})):[],[x?.suggestions]),j=(0,a.useCallback)(async()=>{i?.ref&&r&&n&&await d.invalidateQueries({queryKey:L.databaseKeys.tableIndexAdvisor(i.ref,r,n)})},[d,i?.ref,r,n]),_=h?b(h)[0]:null,S={isLoading:g,isAvailable:l,isEnabled:c,columnsWithSuggestions:x?.columnsWithSuggestions??[],suggestions:x?.suggestions??[],openSheet:y,getSuggestionsForColumn:b,invalidate:j};return(0,t.jsxs)(H.Provider,{value:S,children:[e,(0,t.jsx)(Q.Sheet,{open:u,onOpenChange:e=>!e&&v(),children:(0,t.jsxs)(Q.SheetContent,{className:"flex flex-col gap-0 p-0 sm:max-w-[500px]",children:[(0,t.jsx)(Q.SheetHeader,{className:"border-b px-5 py-3",children:(0,t.jsx)(Q.SheetTitle,{children:"Index Recommendation"})}),_&&(0,t.jsx)(M,{selectedRow:{query:_.query},columnName:h,suggestedSelectQuery:_.query,onClose:v})]})})]})}function K(){return(0,a.useContext)(H)}function W(e){let{columnsWithSuggestions:t}=K();return t.includes(e)}},908942,e=>{"use strict";e.s(["useIndexInvalidation",()=>m]);var t=e.i(356003),s=e.i(346428),a=e.i(645974),r=e.i(389959),n=e.i(494031),i=e.i(937357),o=e.i(246230),l=e.i(635494),c=e.i(764275),d=e.i(888525),u=e.i(826843);function m(){let e=(0,s.useRouter)(),m=(0,t.useQueryClient)(),{data:h}=(0,l.useSelectedProjectQuery)(),{isIndexAdvisorEnabled:p}=(0,d.useIndexAdvisorStatus)(),[{preset:f,search:x,order:g,sort:y}]=(0,a.useQueryStates)({sort:a.parseAsString,search:a.parseAsString.withDefault(""),order:a.parseAsString,preset:a.parseAsString.withDefault("unified")}),{invalidate:v}=(0,u.useTableIndexAdvisor)(),b=c.QUERY_PERFORMANCE_PRESET_MAP[f],j=e?.query?.roles??[],_=(0,n.useQueryPerformanceQuery)({searchQuery:x,orderBy:y?{column:y,order:g}:void 0,preset:b,roles:"string"==typeof j?[j]:j,runIndexAdvisor:p});return(0,r.useCallback)(()=>{_.runQuery(),m.invalidateQueries({queryKey:o.databaseKeys.indexAdvisorFromQuery(h?.ref,"")}),m.invalidateQueries({queryKey:i.databaseIndexesKeys.list(h?.ref)}),v()},[_,m,h?.ref,v])}},809934,e=>{"use strict";let t=(0,e.i(388019).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],809934)},883599,e=>{"use strict";var t=e.i(478902),s=e.i(389959),a=e.i(55956),r=e.i(48189),n=e.i(896975),i=e.i(903805),o=e.i(151675),l=e.i(799108),c=e.i(337072),d=e.i(363269),u=e.i(907026),m=e.i(240022),h=e.i(942880),p=e.i(625198),f=e.i(214765),x=e.i(941327),g=e.i(837574),y=e.i(557385),v=e.i(606331),b=["component"];function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){var t,a=e.component,r=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,b);return(0,s.isValidElement)(a)?t=(0,s.cloneElement)(a,r):(0,g.default)(a)?t=(0,s.createElement)(a,r):(0,v.warn)(!1,"Customized's props `component` must be React.element or Function, but got %s.",j(a)),s.default.createElement(y.Layer,{className:"recharts-customized-wrapper"},t)}_.displayName="Customized";var S=e.i(843778),w=e.i(682679),N=e.i(710377),k=e.i(827022),k=k,C=e.i(874311);let A=({chartHighlight:e,updateDateRange:r,actions:n,chartId:i})=>{let{left:o,right:l,clearHighlight:c}=e??{},[d,u]=(0,s.useState)(!!e?.popoverPosition);(0,s.useEffect)(()=>{u(!!e?.popoverPosition&&o!==l)},[e?.popoverPosition]);let m=o&&l&&c?{start:o,end:l,clear:c,chartId:i}:void 0,h=(0,s.useMemo)(()=>{if(!r||!m)return[];let e=10>(0,a.default)(m.end).diff((0,a.default)(m.start),"minutes");return[{id:"zoom-in",label:"Zoom in",icon:(0,t.jsx)(k.default,{className:"text-foreground-lighter",size:12}),rightSlot:e?(0,t.jsx)("span",{className:"text-xs",children:"Min. 10 minutes"}):null,isDisabled:()=>e,onSelect:({start:t,end:s,clear:a})=>{e||(r(t,s),a())}}]},[m,r]),p=(0,s.useMemo)(()=>[...h,...n??[]],[h,n]);return(0,t.jsxs)(C.DropdownMenu,{open:d,onOpenChange:u,children:[(0,t.jsx)(C.DropdownMenuTrigger,{className:"w-auto p-0",style:{position:"absolute",left:e?.popoverPosition?.x+"px",top:e?.popoverPosition?.y+"px"}}),(0,t.jsxs)(C.DropdownMenuContent,{className:"flex flex-col gap-1 p-1 w-fit text-left",children:[(0,t.jsxs)(C.DropdownMenuLabel,{className:"flex items-center justify-center text-foreground-light font-mono gap-x-2 text-xs",children:[(0,t.jsx)("span",{children:(0,a.default)(o).format("MMM D, H:mm")}),(0,t.jsx)(N.ArrowRight,{size:10}),(0,t.jsx)("span",{children:(0,a.default)(l).format("MMM D, H:mm")})]}),(0,t.jsx)(C.DropdownMenuSeparator,{className:"my-0"}),p.map(e=>{let s=!!m&&!!e.isDisabled&&e.isDisabled(m),a=null;a="function"==typeof e.label?m?e.label(m):null:e.label;let r=null;return r="function"==typeof e.rightSlot?m?e.rightSlot(m):null:e.rightSlot??null,(0,t.jsx)(C.DropdownMenuItem,{asChild:!0,disabled:s,className:(0,S.cn)("group"),children:(0,t.jsxs)("button",{disabled:s,onClick:()=>m&&e.onSelect({...m}),className:"w-full flex items-center gap-1.5",children:[e.icon,(0,t.jsx)("span",{className:"flex-grow text-left",children:a}),r]})},e.id)})]})]})};var E=e.i(834869),P=e.i(940336),R=e.i(613580);let T=({color:e})=>(0,t.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("circle",{cx:"5",cy:"5",r:"3",fill:e})}),I=({color:e})=>(0,t.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("line",{x1:"2",y1:"6",x2:"12",y2:"6",stroke:e??E.CHART_COLORS.REFERENCE_LINE,strokeWidth:"2",strokeDasharray:"2 2"})}),$=e=>e?.find(e=>e.isMaxValue),q=(e,t)=>e?.filter(e=>!t?.includes(e.dataKey)).reduce((e,t)=>e+t.value,0),M=({active:e,payload:s,label:n,attributes:i,isPercentage:o,format:l,valuePrecision:c,showTotal:d,isActiveHoveredChart:u})=>{if(e&&s&&s.length){let n=s[0].payload,m=n?.hasOwnProperty("timestamp")?"timestamp":"period_start",h=s[0].payload[m],p=$(i),f=p&&s?.find(e=>e.dataKey===p.attribute),x=f?.value,g=!s?.some(e=>"ram_usage"===e.dataKey.toLowerCase())&&s?.some(e=>e.dataKey.toLowerCase().includes("ram_")),y=s?.some(e=>e.dataKey.toLowerCase().includes("disk_fs_"))||s?.some(e=>e.dataKey.toLowerCase().includes("pg_database_size")),v=s?.some(e=>e.dataKey.toLowerCase().includes("network_")),b="bytes"===l||"bytes-per-second"===l||g||y||v,j="bytes-per-second"===l?"/s":"",_=[...i?.filter(e=>e.omitFromTotal)?.map(e=>e.attribute)??[],...i?.filter(e=>e?.provider==="reference-line")?.map(e=>e.attribute)??[],...p?.attribute?[p.attribute]:[]],w=a.default.tz.guess(),N=d&&q(s,_),k=e=>!b&&0===c&&e>0&&e<1?"<1":b?(0,r.formatBytes)(v?Math.abs(e):e,c):(0,P.numberFormatter)(e,c),C=({entry:e})=>{let s,a=i?.find(t=>t?.attribute===e.name),r=(e.value/x*100).toFixed(c),n=e.dataKey===p?.attribute;return(0,t.jsxs)("div",{className:"flex items-center w-full",children:[(s=e.color,n?(0,t.jsx)(I,{}):(0,t.jsx)(T,{color:s})),(0,t.jsx)("span",{className:"text-foreground-lighter ml-1 flex-grow cursor-default select-none",children:a?.label||e.name}),(0,t.jsxs)("span",{className:"ml-3.5 flex items-end gap-1",children:[k(e.value)+(o||"ms"===l?"":j),o?"%":"","ms"===l?"ms":"",!!f&&!n&&!o&&(0,t.jsxs)("span",{className:"text-[11px] text-foreground-light mb-0.5",children:["(",r,"%)"]})]})]},e.name)};return(0,t.jsxs)("div",{className:(0,S.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg px-2.5 py-1.5 text-xs shadow-xl transition-opacity opacity-100",!u&&"opacity-0"),children:[(0,t.jsx)("p",{className:"text-foreground-light text-xs",children:w}),(0,t.jsx)("p",{className:"font-medium",children:(0,a.default)(h).format(E.DateTimeFormats.FULL_SECONDS)}),(0,t.jsxs)("div",{className:"grid gap-0",children:[s.reverse().map((e,s)=>(0,t.jsx)(C,{entry:e},`${e.name}-${s}`)),e&&d&&(0,t.jsxs)("div",{className:"flex md:flex-col gap-1 md:gap-0 text-foreground mt-1",children:[(0,t.jsx)("span",{className:"flex-grow text-foreground-lighter",children:"Total"}),(0,t.jsxs)("div",{className:"flex items-end gap-1",children:[(0,t.jsxs)("span",{className:"text-base",children:[o?(0,P.formatPercentage)(N,c):k(N)+(o||"ms"===l?"":j),"ms"===l?"ms":""]}),p&&!o&&!isNaN(N/f?.value)&&isFinite(N/f?.value)&&(0,t.jsxs)("span",{className:"text-[11px] text-foreground-light mb-0.5",children:["(",(N/f?.value*100).toFixed(1),"%)"]})]})]})]})]})}return null},L=({payload:e,attributes:a,showMaxValue:r,onLabelHover:n,onToggleAttribute:i,hiddenAttributes:o})=>{let l=$(a),[c,d]=(0,s.useState)(null),u=()=>{d(null),n?.(null)},m=({entry:e})=>{let s=a?.find(t=>t.attribute===e.name),c=e.name===l?.attribute,m=o?.has(e.name),h=m?"gray":e.color,p=()=>{var a;return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(a=e.name,a===l?.attribute==!0?(0,t.jsx)(I,{}):(0,t.jsx)(T,{color:h})),(0,t.jsx)("span",{className:(0,S.cn)("text-nowrap text-foreground-lighter",m&&"opacity-50"),children:s?.label||e.name})]})};return!r&&c?null:(0,t.jsx)("button",{className:"flex md:flex-col gap-1 md:gap-0 w-fit text-foreground rounded-lg  hover:bg-background-overlay-hover",onMouseOver:()=>{var t;d(t=e.name),n?.(t)},onMouseOutCapture:u,onClick:t=>i?.(e.name,{exclusive:t.metaKey||t.ctrlKey}),children:s?.tooltip?(0,t.jsxs)(R.Tooltip,{children:[(0,t.jsx)(R.TooltipTrigger,{className:"p-1.5",children:(0,t.jsx)(p,{})}),(0,t.jsx)(R.TooltipContent,{sideOffset:6,side:"bottom",align:"center",className:"max-w-[250px]",children:s.tooltip})]}):(0,t.jsx)(p,{})},e.name)};return(0,t.jsx)("div",{className:"relative z-10 mx-auto flex flex-col items-center gap-1 text-xs w-full",children:(0,t.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:(0,t.jsx)(R.TooltipProvider,{delayDuration:800,children:(e??[])?.map((e,s)=>(0,t.jsx)(m,{entry:e},`${e.name}-${s}`))})})})};var O=e.i(414833),F=e.i(150401);function D({chartId:e,data:g,attributes:y,yAxisKey:v,xAxisKey:b,format:j,customDateFormat:N=E.DateTimeFormats.FULL,title:k,highlightedValue:C,highlightedLabel:R,displayDateInUtc:T,minimalHeader:I,valuePrecision:$,className:D="",size:Q="normal",emptyStateMessage:H,onBarClick:z,showLegend:K=!1,xAxisIsDate:W=!0,XAxisProps:B,YAxisProps:U,showGrid:Y=!1,showTooltip:G=!1,showTotal:V=!0,showMaxValue:Z=!1,chartHighlight:X,hideChartType:J,chartStyle:ee,onChartStyleChange:et,updateDateRange:es,hideYAxis:ea,hideHighlightedValue:er,hideHighlightedLabel:en=!1,hideHighlightArea:ei=!1,syncId:eo,docsUrl:el,sql:ec,highlightActions:ed,titleTooltip:eu,showNewBadge:em}){let eh,ep,ef,{resolvedTheme:ex}=(0,n.useTheme)(),{hoveredIndex:eg,syncTooltip:ey,setHover:ev,clearHover:eb}=(0,F.useChartHoverState)(eo||"default"),[ej,e_]=(0,s.useState)(null),[eS,ew]=(0,s.useState)(Z),[eN,ek]=(0,s.useState)(null),[eC,eA]=(0,s.useState)(!1),[eE,eP]=(0,s.useState)(new Set),eR=ex?.includes("dark");(0,s.useEffect)(()=>{(0,E.updateStackedChartColors)(eR??!1)},[eR]);let{Container:eT}=(0,P.useChartSize)(Q),eI=e=>T?(0,a.default)(e).utc():(0,a.default)(e),e$=e=>"number"!=typeof e&&"string"!=typeof e?"":"number"==typeof e&&e>1e14?eI(e/1e3).format(N):eI(e).format(N),eq=B||{interval:g.length-2,angle:0,tick:!1},eM=U||{tickFormatter:e=>(0,P.numberFormatter)(e,$),tick:!1,width:0},eL=y.find(e=>e.isMaxValue),eO={name:eL?.attribute,color:E.CHART_COLORS.REFERENCE_LINE},eF=y.filter(e=>e?.provider==="reference-line"),eD=W?null!==eN&&g&&void 0!==g[eN]&&e$(g[eN][b])||R:eN?g[eN]?.[b]:R,eQ=(eh=y.filter(e=>e?.provider==="reference-line"),ep=[...y?.filter(e=>e.omitFromTotal)?.map(e=>e.attribute)??[],...eh?.map(e=>e.attribute)??[],...eL?.attribute?[eL?.attribute]:[],...Array.from(eE)],ef=g[g.length-1]?Object.entries(g[g.length-1]).map(([e,t])=>({dataKey:e,value:t})).filter(e=>"timestamp"!==e.dataKey&&"period_start"!==e.dataKey&&y.some(t=>t.attribute===e.dataKey&&!1!==t.enabled)):void 0,null!==eN?V?q(ej,ep):g[eN]?.[v]:V&&ef?q(ef,ep):C),eH=X?.coordinates.left&&X?.coordinates.right&&X?.coordinates.left!==X?.coordinates.right,ez=g&&g[0]?Object.entries(g[0])?.map(([e,t])=>({name:e,value:t})).filter(e=>"timestamp"!==e.name&&"period_start"!==e.name&&e.name!==eL?.attribute&&!eF.map(e=>e.attribute).includes(e.name)&&y.some(t=>t.attribute===e.name&&!1!==t.enabled)).map((e,t)=>{let s=y.find(t=>t.attribute===e.name);return{...e,color:s?.color?eR?s.color.dark:s.color.light:E.STACKED_CHART_COLORS[t%E.STACKED_CHART_COLORS.length],fill:s?.fill?eR?s.fill.dark:s.fill.light:E.STACKED_CHART_FILLS[t%E.STACKED_CHART_FILLS.length]}}):[],eK=ez.filter(e=>{let t=y.find(t=>t.attribute===e.name);return!t?.isMaxValue}).filter(e=>!eE.has(e.name)),eW="%"===j,eB=!ez?.some(e=>"ram_usage"===e.name.toLowerCase())&&ez?.some(e=>e.name.toLowerCase().includes("ram_")),eU=ez?.some(e=>e.name.toLowerCase().includes("disk_space_")),eY=ez?.some(e=>e.name.toLowerCase().includes("pg_database_size")),eG=ez?.some(e=>e.name.toLowerCase().includes("network_")),eV="bytes"===j||"bytes-per-second"===j||eB||eU||eY||eG,eZ=Math.max(0,...eK.map(e=>"number"==typeof e.value?e.value:0));return 0===g.length?(0,t.jsx)(O.default,{hideTotalPlaceholder:void 0===C,message:H,description:"It may take up to 24 hours for data to refresh",size:Q,className:D,attribute:k,format:j,titleTooltip:eu}):(0,t.jsxs)("div",{className:(0,S.cn)("flex flex-col gap-y-3",D),children:[(0,t.jsx)(w.ChartHeader,{hideHighlightedValue:er,title:k,showNewBadge:em,format:j,hideHighlightedLabel:en,hideHighlightArea:ei,titleTooltip:eu,customDateFormat:N,highlightedValue:function(e){if("number"!=typeof e)return e;if(eV){let t=eG?Math.abs(e):e,s=(0,r.formatBytes)(t,$);return"bytes-per-second"===j?`${s}/s`:s}return"%"===j?(0,P.formatPercentage)(e,$):0===$&&e>0&&e<1?"<1":(0,P.numberFormatter)(e,$)}(eQ),highlightedLabel:eD,minimalHeader:I,hideChartType:J,chartStyle:ee,onChartStyleChange:et,showMaxValue:eS,setShowMaxValue:eL?ew:void 0,docsUrl:el,syncId:eo,data:g,xAxisKey:b,yAxisKey:v,xAxisIsDate:W,displayDateInUtc:T,valuePrecision:$,shouldFormatBytes:eV,isNetworkChart:eG,attributes:y,sql:ec}),(0,t.jsxs)(eT,{className:"relative z-10",children:[(0,t.jsxs)(u.ComposedChart,{data:g,syncId:eo,style:{cursor:"crosshair"},onMouseMove:({activeLabel:e,activeTooltipIndex:t,activePayload:s})=>{if(!t)return;eA(!0),t!==eN&&(ek(t),e_(s??[])),ev(t);let a=g[t]?.timestamp;X?.handleMouseMove({activeLabel:a?.toString(),coordinates:e})},onMouseDown:({activeLabel:e,activeTooltipIndex:t})=>{if(!t)return;let s=g[t]?.timestamp;X?.handleMouseDown({activeLabel:s?.toString(),coordinates:e})},onMouseUp:X?.handleMouseUp,onMouseLeave:()=>{eA(!1),ek(null),e_(null),eb()},onClick:e=>{let t=e?.activePayload?.[0]?.payload;z&&z(t,e)},children:[Y&&(0,t.jsx)(l.CartesianGrid,{stroke:E.CHART_COLORS.AXIS}),(0,s.createElement)(x.YAxis,{...eM,hide:ea,axisLine:{stroke:E.CHART_COLORS.AXIS},tickLine:{stroke:E.CHART_COLORS.AXIS},domain:eW&&!Z?[0,eZ]:["auto","auto"],key:v}),(0,s.createElement)(f.XAxis,{...eq,axisLine:{stroke:E.CHART_COLORS.AXIS},tickLine:{stroke:E.CHART_COLORS.AXIS},tickMargin:8,minTickGap:3,key:b}),(0,t.jsx)("defs",{children:eK.map(e=>(0,t.jsxs)("linearGradient",{id:`gradient-${e.name}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:e.color,stopOpacity:.15}),(0,t.jsx)("stop",{offset:"95%",stopColor:eR?"#131313":"#FFFFFF",stopOpacity:0})]},`gradient-${e.name}`))}),"bar"===ee?eK.map(e=>(0,t.jsx)(o.Bar,{dataKey:e.name,stackId:y?.find(t=>t.attribute===e?.name)?.stackId??"1",fill:e.color,radius:.75,opacity:1,name:y?.find(t=>t.attribute===e?.name)?.label||e?.name,maxBarSize:24},e.name)):eK.map((e,s)=>(0,t.jsx)(i.Area,{type:"linear",dataKey:e.name,stackId:"1",fill:`url(#gradient-${e.name})`,fillOpacity:1,stroke:e.color,radius:20,animationDuration:375,name:y?.find(t=>t.attribute===e.name)?.label||e.name,dot:!1,activeDot:!1},e.name)),eL&&eS&&(0,t.jsx)(d.Line,{type:"linear",dataKey:eL.attribute,stroke:E.CHART_COLORS.REFERENCE_LINE,strokeWidth:2,strokeDasharray:eL.strokeDasharray??"3 3",dot:!1,name:eL.label},eL.attribute),eF.filter(e=>e.isReferenceLine).map(e=>(0,t.jsx)(h.ReferenceLine,{y:e.value,strokeWidth:1,stroke:eR?e.color?.dark:e.color?.light,strokeDasharray:e.strokeDasharray??"3 3",label:void 0,children:(0,t.jsx)(c.Label,{value:e.label,position:"insideTopRight",fill:E.CHART_COLORS.REFERENCE_LINE_TEXT,className:"text-xs",style:{fill:E.CHART_COLORS.REFERENCE_LINE_TEXT}})},e.attribute)),eH&&(0,t.jsx)(m.ReferenceArea,{x1:X?.coordinates.left,x2:X?.coordinates.right,strokeOpacity:.5,stroke:eR?"#FFFFFF":"#0C3925",fill:eR?"#FFFFFF":"#0C3925",fillOpacity:.2}),(0,t.jsx)(p.Tooltip,{content:e=>G&&!eH?(0,t.jsx)(M,{...e,format:j,isPercentage:eW,label:eD,attributes:y,valuePrecision:$,showTotal:V,isActiveHoveredChart:eC||!!eo&&ey&&null!==eg}):null,cursor:{stroke:eR?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",strokeWidth:1}}),(0,t.jsx)(_,{component:e=>{let{formattedGraphicalItems:s}=e;return s&&null!==eN?(0,t.jsx)("g",{children:s.map((e,s)=>{let a=e.props?.points||e.item?.props?.points||e.points,r=e.props?.dataKey||e.item?.props?.dataKey;if(!a||!a[eN])return null;let n=a[eN],i=eK.find(e=>e.name===r);return i?(0,t.jsx)("circle",{cx:n.x,cy:n.y,r:4,fill:i.fill,stroke:i.color,strokeWidth:1},`custom-dot-${r}-${s}`):null})}):null}})]}),(0,t.jsx)(A,{chartHighlight:X,updateDateRange:es,actions:ed,chartId:e})]}),g&&(0,t.jsxs)("div",{className:"text-foreground-lighter -mt-9 flex items-center justify-between text-xs",style:{marginLeft:U?.width},children:[(0,t.jsx)("span",{children:W?e$(g[0]?.[b]):g[0]?.[b]}),(0,t.jsx)("span",{children:W?e$(g[g.length-1]?.[b]):g[g.length-1]?.[b]})]}),K&&(0,t.jsx)("div",{className:"relative z-0",children:(0,t.jsx)(L,{payload:[eO,...ez],attributes:y,showMaxValue:eS,onToggleAttribute:(e,t)=>{eP(s=>{if(t?.exclusive){let t=ez.map(e=>e.name).filter(t=>t!==e);return t.every(e=>s.has(e))&&!s.has(e)?new Set:new Set(t)}let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},hiddenAttributes:eE})})]})}e.s(["ComposedChart",()=>D],883599)},932291,e=>{"use strict";var t=e.i(478902),s=e.i(88816),a=e.i(389959),r=e.i(737018),n=e.i(767073),i=e.i(130843),o=e.i(837710),l=e.i(843778),c=e.i(746301),d=e.i(97429);let u={"=":"Equals",">=":"Greater than or equal to","<=":"Less than or equal to",">":"Greater than","<":"Less than","!=":"Not equal to"},m=d.z.enum(["=",">=","<=",">","<","!="]),h=d.z.object({operator:m,value:d.z.number()});e.s(["ReportsNumericFilter",0,({label:e,value:d,onChange:m,operators:h=["=",">=","<=",">","<","!="],defaultOperator:p="=",placeholder:f="Enter value",min:x,max:g,step:y=1,isLoading:v=!1,className:b})=>{let[j,_]=(0,a.useState)(!1),[S,w]=(0,a.useState)(d),N=null!==d;(0,a.useEffect)(()=>{j||w(d)},[j,d]);let k=()=>{m(S),_(!1)},C=()=>d?`${d.operator} ${d.value}`:"";return(0,t.jsxs)(n.Popover,{open:j,onOpenChange:_,children:[(0,t.jsx)(n.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{type:N?"default":"outline",className:(0,l.cn)("min-w-20 border-dashed relative group justify-between",{"border-solid":N},b),iconRight:(0,t.jsx)(s.ChevronDown,{size:14}),children:(0,t.jsxs)("span",{children:[e,C()&&(0,t.jsx)("span",{className:"ml-1 text-xs font-mono text-foreground-light",children:C()})]})})}),(0,t.jsxs)(n.PopoverContent,{align:"start",className:"p-0 w-72",children:[(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),k()},className:"px-3 py-3 flex flex-col gap-y-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(r.Label,{className:"text-xs",children:"Operator"}),(0,t.jsxs)(i.Select,{value:S?.operator||p,onValueChange:e=>{w({operator:e,value:S?.value??0})},children:[(0,t.jsx)(i.SelectTrigger,{className:"text-xs",children:(0,t.jsx)(i.SelectValue,{})}),(0,t.jsx)(i.SelectContent,{children:h.map(e=>(0,t.jsxs)(i.SelectItem,{value:e,className:"text-xs flex items-center",children:[(0,t.jsx)("span",{className:"font-mono",children:e}),(0,t.jsx)("span",{className:"text-foreground-light ml-2",children:u[e]})]},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(r.Label,{className:"text-xs",children:"Value"}),(0,t.jsx)(c.Input,{autoFocus:!0,type:"number",placeholder:f,value:S?.value||"",onChange:e=>(e=>{if(""===e)w(null);else{let t=parseFloat(e);isNaN(t)||w({operator:S?.operator??p,value:t})}})(e.target.value),min:x,max:g,step:y}),(void 0!==x||void 0!==g)&&(0,t.jsx)("p",{className:"text-xs text-foreground-light",children:void 0!==x&&void 0!==g?`Range: ${x} - ${g}`:void 0!==x?`Min: ${x}`:`Max: ${g}`})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t border-default p-2",children:[(0,t.jsx)(o.Button,{size:"tiny",type:"outline",onClick:()=>{w(null)},children:"Clear"}),(0,t.jsx)(o.Button,{loading:v,size:"tiny",type:"primary",onClick:k,htmlType:"button",children:"Apply"})]})]})]})},"numericFilterSchema",0,h])},649068,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},593484,e=>{"use strict";var t=e.i(389959);e.s(["useDebouncedValue",0,(e,s)=>{var a,r,n,i,o,l,c,d,u,m,h,p;let[f,x]=(0,t.useState)(e);return a=()=>{x(e)},void 0===(r=s)&&(r=0),n=[e],(void 0===(i=r)&&(i=0),o=(0,t.useRef)(!1),l=(0,t.useRef)(),c=(0,t.useRef)(a),d=(0,t.useCallback)(function(){return o.current},[]),u=(0,t.useCallback)(function(){o.current=!1,l.current&&clearTimeout(l.current),l.current=setTimeout(function(){o.current=!0,c.current()},i)},[i]),m=(0,t.useCallback)(function(){o.current=null,l.current&&clearTimeout(l.current)},[]),(0,t.useEffect)(function(){c.current=a},[a]),(0,t.useEffect)(function(){return u(),m},[i]),h=[d,m,u])[0],h[1],p=h[2],(0,t.useEffect)(p,n),f}],593484)},114106,(e,t,s)=>{e.e,t.exports=function(){"use strict";var e,t,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,r={years:31536e6,months:2628e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},n=function(e){return e instanceof u},i=function(e,t,s){return new u(e,s,t.$l)},o=function(e){return t.p(e)+"s"},l=function(e){return e<0},c=function(e){return l(e)?Math.ceil(e):Math.floor(e)},d=function(e,t){return e?l(e)?{negative:!0,format:""+Math.abs(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},u=function(){function l(e,t,s){var n=this;if(this.$d={},this.$l=s,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return i(e*r[o(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach(function(t){n.$d[o(t)]=e[t]}),this.calMilliseconds(),this;if("string"==typeof e){var l=e.match(a);if(l){var c=l.slice(2).map(function(e){return null!=e?Number(e):0});return this.$d.years=c[0],this.$d.months=c[1],this.$d.weeks=c[2],this.$d.days=c[3],this.$d.hours=c[4],this.$d.minutes=c[5],this.$d.seconds=c[6],this.calMilliseconds(),this}}return this}var u=l.prototype;return u.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(t,s){return t+(e.$d[s]||0)*r[s]},0)},u.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=c(e/31536e6),e%=31536e6,this.$d.months=c(e/2628e6),e%=2628e6,this.$d.days=c(e/864e5),e%=864e5,this.$d.hours=c(e/36e5),e%=36e5,this.$d.minutes=c(e/6e4),e%=6e4,this.$d.seconds=c(e/1e3),e%=1e3,this.$d.milliseconds=e},u.toISOString=function(){var e=d(this.$d.years,"Y"),t=d(this.$d.months,"M"),s=+this.$d.days||0;this.$d.weeks&&(s+=7*this.$d.weeks);var a=d(s,"D"),r=d(this.$d.hours,"H"),n=d(this.$d.minutes,"M"),i=this.$d.seconds||0;this.$d.milliseconds&&(i+=this.$d.milliseconds/1e3,i=Math.round(1e3*i)/1e3);var o=d(i,"S"),l=e.negative||t.negative||a.negative||r.negative||n.negative||o.negative,c=r.format||n.format||o.format?"T":"",u=(l?"-":"")+"P"+e.format+t.format+a.format+c+r.format+n.format+o.format;return"P"===u||"-P"===u?"P0D":u},u.toJSON=function(){return this.toISOString()},u.format=function(e){var a={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return(e||"YYYY-MM-DDTHH:mm:ss").replace(s,function(e,t){return t||String(a[e])})},u.as=function(e){return this.$ms/r[o(e)]},u.get=function(e){var t=this.$ms,s=o(e);return"milliseconds"===s?t%=1e3:t="weeks"===s?c(t/r[s]):this.$d[s],t||0},u.add=function(e,t,s){var a;return a=t?e*r[o(t)]:n(e)?e.$ms:i(e,this).$ms,i(this.$ms+a*(s?-1:1),this)},u.subtract=function(e,t){return this.add(e,t,!0)},u.locale=function(e){var t=this.clone();return t.$l=e,t},u.clone=function(){return i(this.$ms,this)},u.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},u.valueOf=function(){return this.asMilliseconds()},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},l}(),m=function(e,t,s){return e.add(t.years()*s,"y").add(t.months()*s,"M").add(t.days()*s,"d").add(t.hours()*s,"h").add(t.minutes()*s,"m").add(t.seconds()*s,"s").add(t.milliseconds()*s,"ms")};return function(s,a,r){e=r,t=r().$utils(),r.duration=function(e,t){return i(e,{$l:r.locale()},t)},r.isDuration=n;var o=a.prototype.add,l=a.prototype.subtract;a.prototype.add=function(e,t){return n(e)?m(this,e,1):o.bind(this)(e,t)},a.prototype.subtract=function(e,t){return n(e)?m(this,e,-1):l.bind(this)(e,t)}}}()},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function s(e,t={}){let{maxDepth:a=3,redaction:r="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:i=[]}=t,o=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...i].map(e=>e.toLowerCase())),l=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of l)t=t.replace(e,r);return t}function u(e){return o.has(String(e).toLowerCase())}return e.map(e=>(function e(t,s){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(s>=a)return n;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let a=[];c.set(t,a);for(let r=0;r<t.length;r++)a[r]=e(t[r],s+1);return a}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let a={};for(let[n,i]of(c.set(t,a),Object.entries(t)))u(n)?a[n]=r:a[n]=e(i,s+1);return a}if(t instanceof Map){let a=[];for(let[n,i]of(c.set(t,a),t.entries())){let t=u(n)?r:e(n,s+1),o=u(n)?r:e(i,s+1);a.push([t,o])}return a}if(t instanceof Set){let a=[];for(let r of(c.set(t,a),t.values()))a.push(e(r,s+1));return a}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:n};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>s,"sanitizeUrlHashParams",()=>t])},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},929883,e=>{e.v(t=>Promise.all(["static/chunks/6fd253a8b8879e46.js"].map(t=>e.l(t))).then(()=>t(120649)))},763533,e=>{e.v(t=>Promise.all(["static/chunks/66a6e57db35d752a.js"].map(t=>e.l(t))).then(()=>t(938650)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/4074009b603ec229.js","static/chunks/82dddbda1a808189.js","static/chunks/9f1b22cc5cc0244c.js","static/chunks/c974c4c17d9b515a.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},444600,e=>{e.v(t=>Promise.all(["static/chunks/b183291222ed3586.js"].map(t=>e.l(t))).then(()=>t(89570)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/44e647523eaf7d10.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))},846537,e=>{e.v(t=>Promise.all(["static/chunks/acf3285986dfbd7a.js"].map(t=>e.l(t))).then(()=>t(245201)))},50229,e=>{e.v(t=>Promise.all(["static/chunks/3bcb48bb59845022.js"].map(t=>e.l(t))).then(()=>t(331248)))},263652,e=>{e.v(t=>Promise.all(["static/chunks/aa4006ae66587429.js"].map(t=>e.l(t))).then(()=>t(700224)))},822335,e=>{e.v(t=>Promise.all(["static/chunks/ee69726af0316987.js"].map(t=>e.l(t))).then(()=>t(48216)))},827389,e=>{e.v(t=>Promise.all(["static/chunks/f888750d45a24867.js"].map(t=>e.l(t))).then(()=>t(780795)))},306465,e=>{e.v(t=>Promise.all(["static/chunks/95db3728117c6ee7.js"].map(t=>e.l(t))).then(()=>t(84223)))},320810,e=>{e.v(t=>Promise.all(["static/chunks/f5da8b2852673ce6.js"].map(t=>e.l(t))).then(()=>t(190529)))},44756,e=>{e.v(t=>Promise.all(["static/chunks/fe9cc17dc6466440.js"].map(t=>e.l(t))).then(()=>t(411609)))},77572,e=>{e.v(t=>Promise.all(["static/chunks/881b451403819e35.js"].map(t=>e.l(t))).then(()=>t(550910)))},299015,e=>{e.v(t=>Promise.all(["static/chunks/e771049771127f6f.js"].map(t=>e.l(t))).then(()=>t(956403)))},853832,e=>{e.v(t=>Promise.all(["static/chunks/da4d4a78a31fafb9.js"].map(t=>e.l(t))).then(()=>t(523047)))},444444,e=>{e.v(t=>Promise.all(["static/chunks/f38e028ff72cdce1.js"].map(t=>e.l(t))).then(()=>t(306141)))},89982,e=>{e.v(t=>Promise.all(["static/chunks/7f0708c377c6315e.js"].map(t=>e.l(t))).then(()=>t(84181)))},439,e=>{e.v(t=>Promise.all(["static/chunks/92660c7112298340.js"].map(t=>e.l(t))).then(()=>t(585967)))},674055,e=>{e.v(t=>Promise.all(["static/chunks/7dba2c88da4802d7.js"].map(t=>e.l(t))).then(()=>t(659864)))},801894,e=>{e.v(t=>Promise.all(["static/chunks/aa9037f0686299b0.js"].map(t=>e.l(t))).then(()=>t(532683)))},578444,e=>{e.v(t=>Promise.all(["static/chunks/e8ca73a1fb74d864.js"].map(t=>e.l(t))).then(()=>t(221183)))},185608,e=>{e.v(t=>Promise.all(["static/chunks/3634617ddd98d861.js"].map(t=>e.l(t))).then(()=>t(79472)))},612314,e=>{e.v(t=>Promise.all(["static/chunks/92d2e23f362178b8.js"].map(t=>e.l(t))).then(()=>t(980791)))},660943,e=>{e.v(t=>Promise.all(["static/chunks/c90413a3fb4f7fb4.js"].map(t=>e.l(t))).then(()=>t(620893)))},214615,e=>{e.v(t=>Promise.all(["static/chunks/726c9c09fe01762c.js"].map(t=>e.l(t))).then(()=>t(194742)))},877303,e=>{e.v(t=>Promise.all(["static/chunks/65b0f15c58106291.js"].map(t=>e.l(t))).then(()=>t(85809)))},565731,e=>{e.v(t=>Promise.all(["static/chunks/a857737ee1ea178f.js"].map(t=>e.l(t))).then(()=>t(846526)))},439954,e=>{e.v(t=>Promise.all(["static/chunks/ea2e29758f7a6140.js"].map(t=>e.l(t))).then(()=>t(399358)))},646193,e=>{e.v(t=>Promise.all(["static/chunks/0e86c6f6f44c3d01.js"].map(t=>e.l(t))).then(()=>t(270671)))},470322,e=>{e.v(t=>Promise.all(["static/chunks/95e51d9895d75e1b.js"].map(t=>e.l(t))).then(()=>t(433215)))},310666,e=>{e.v(t=>Promise.all(["static/chunks/c29b3dc53abbda08.js"].map(t=>e.l(t))).then(()=>t(191809)))},38970,e=>{e.v(t=>Promise.all(["static/chunks/10af340af0ab27cf.js"].map(t=>e.l(t))).then(()=>t(66554)))},68365,e=>{e.v(t=>Promise.all(["static/chunks/8229f5f7f1da78d8.js"].map(t=>e.l(t))).then(()=>t(531769)))},705292,e=>{e.v(t=>Promise.all(["static/chunks/055f0ce00306f8fb.js"].map(t=>e.l(t))).then(()=>t(147575)))},736620,e=>{e.v(t=>Promise.all(["static/chunks/fb200c2b93e182d4.js"].map(t=>e.l(t))).then(()=>t(85022)))},101928,e=>{e.v(t=>Promise.all(["static/chunks/b11be5a5365b7b1d.js"].map(t=>e.l(t))).then(()=>t(846161)))},41375,e=>{e.v(t=>Promise.all(["static/chunks/6ce3b68ef69bef0c.js"].map(t=>e.l(t))).then(()=>t(834473)))},715733,e=>{e.v(t=>Promise.all(["static/chunks/1f996c98ffdc95c1.js"].map(t=>e.l(t))).then(()=>t(417897)))},268726,e=>{e.v(t=>Promise.all(["static/chunks/f82819fa16566fe0.js"].map(t=>e.l(t))).then(()=>t(898187)))},740028,e=>{e.v(t=>Promise.all(["static/chunks/104dd8c9c2b519a7.js"].map(t=>e.l(t))).then(()=>t(391060)))}]);

//# debugId=0c7449fa-a32e-1908-86d6-9d4a641e3094
//# sourceMappingURL=947b62ef03f977c7.js.map